# Protobuf messages definitions

This repo defines a Rust crate to import Beep's Protobuf packages.

## Adding a Protobuf package and messages

See `./src/proto/test.proto` for an example Protobuf package and messages.
Write your own Protobuf files inside this `./src/proto/` directory.

Then define the module and include the generated structs in the `./src/lib.rs` file, as seen in that file.
This way, code including that crate can `use` the module (make it `pub`).

Here is a link to [Protobuf version 3's language documentation](https://protobuf.dev/programming-guides/proto3/).

## Usage

To use the Protobuf messages in your Rust code, i.e. the `struct`s generated by Prost, you need the `protoc` Protobuf compiler.
Here is a link to [Protoc's installation](https://protobuf.dev/installation/).

You can use version tags for stable Protobuf messages, or the SHA1 of your branch if you are working on API changes.
See the examples below.

Here are some examples for a `Cargo.toml` file:

```toml
[dependencies]
# a commit with a particular tag
events-protobuf = { git = "https://github.com/beep-industries/events-protobuf.git", tag = "1.10.3" }

# a commit by its SHA1 hash
events-protobuf = { git = "https://github.com/beep-industries/events-protobuf.git", rev = "0c0990399270277832fbb5b91a1fa118e6f63dba" }

# HEAD commit of PR 493
events-protobuf = { git = "https://github.com/beep-industries/events-protobuf.git", rev = "refs/pull/493/head" }
```

**If your code should use a stable version of the API, use a version tag** as seen above.
If you are currently developing an interface (such as in a branch or PR on this repo), use the SHA1 of a specific commit, or a PR's branch HEAD as seen above.

You can find more information on this [in Cargo's documentation](https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#specifying-dependencies-from-git-repositories)

---

After importing the crate, to use the generated structs, `use` the library as seen in the example below:

```rust
use events_protobuf::test_svc_merchandise;

let shirt1 = test_svc_merchandise::Shirt { ..Default::default() };
```

This is the easiest way to use the library.

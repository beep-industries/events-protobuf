syntax = "proto3";

// Message service real time events
package messages.events;

// Common types and enums

message NotifyEntry {
  string type = 1; // Type of notify entry (e.g., "user", "role")
  string id = 2; // ID of the user or role to notify
}

// New message in a channel event
message CreateMessageEvent {
  string message_id = 1; // ID of the newly created message
  string channel_id = 2; // ID of the channel where the message was posted
  string author_id = 3; // ID of the user who authored the message
  string content = 4; // Content of the message
  string reply_to_message_id = 5; // ID of the message being replied to, if any
  message Attachment {
    string id = 1;
    string name = 2;
    string url = 3;
  }
  repeated Attachment attachments = 6;
  repeated NotifyEntry notify_entries = 7; // Entries to notify
}

// Message update event
message UpdateMessageEvent {
  string message_id = 1; // ID of the newly created message
  optional string content = 2; // Content of the message
  optional bool is_pinned = 3; // Whether the message is pinned
  repeated NotifyEntry notify_entries = 4; // Entries to notify
}

// Message deletion event
message DeleteMessageEvent {
  string message_id = 1; // ID of the newly created message
}
